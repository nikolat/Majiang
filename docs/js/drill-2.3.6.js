(()=>{"use strict";var a={6321:a=>{a.exports=JSON.parse('{"Mリーグルール":{"配給原点":25000,"順位点":["+30.0","+10.0","-10.0","-30.0"],"赤牌":{"m":1,"p":1,"s":1},"連風牌は2符":true,"クイタンあり":true,"喰い替え許可レベル":0,"場数":2,"途中流局あり":false,"流し満貫あり":false,"ノーテン宣言あり":true,"ノーテン罰あり":true,"最大同時和了数":1,"連荘方式":2,"トビ終了あり":false,"オーラス止めあり":false,"延長戦方式":0,"一発あり":true,"裏ドラあり":true,"カンドラあり":true,"カン裏あり":true,"カンドラ後乗せ":false,"ツモ番なしリーチあり":true,"リーチ後暗槓許可レベル":1,"ダブル役満あり":false,"役満の複合あり":true,"数え役満あり":false,"役満パオあり":true,"切り上げ満貫あり":true},"Classicルール":{"配給原点":30000,"順位点":["+12.0","+4.0","-4.0","-12.0"],"赤牌":{"m":0,"p":0,"s":0},"連風牌は2符":false,"クイタンあり":true,"喰い替え許可レベル":2,"場数":2,"途中流局あり":false,"流し満貫あり":false,"ノーテン宣言あり":false,"ノーテン罰あり":false,"最大同時和了数":1,"連荘方式":1,"トビ終了あり":false,"オーラス止めあり":false,"延長戦方式":0,"一発あり":false,"裏ドラあり":false,"カンドラあり":false,"カン裏あり":false,"カンドラ後乗せ":false,"ツモ番なしリーチあり":true,"リーチ後暗槓許可レベル":0,"ダブル役満あり":false,"役満の複合あり":false,"数え役満あり":false,"役満パオあり":false,"切り上げ満貫あり":false}}')}},e={};function i(n){var t=e[n];if(void 0!==t)return t.exports;var l=e[n]={exports:{}};return a[n](l,l.exports,i),l.exports}(()=>{
/*!
 *  電脳麻将: 点数計算ドリル v2.3.6
 *
 *  Copyright(C) 2017 Satoshi Kobayashi
 *  Released under the MIT license
 *  https://github.com/kobalab/Majiang/blob/master/LICENSE
 */
const{hide:a,show:e,fadeIn:n,fadeOut:t}=Majiang.UI.Util,l=i(6321),o={},u=["東","南","西","北"];let s,p,r,f;class h extends Majiang.AI{select_lizhi(a){return this.allow_lizhi(this.shoupai,a)&&Math.random()<.3}}function g(a){for(;;){let e=2*Math.random()|0,i=4*Math.random()|0,n=["","","",""],t=new Majiang.Shan(a._rule),l=[];for(let a=0;a<13;a++)l.push(t.zimo());n[i]=new Majiang.Shoupai(l).toString(),a.qipai({zhuangfeng:e,jushu:[0,3,2,1][i],changbang:0,lizhibang:0,defen:[25e3,25e3,25e3,25e3],baopai:t.baopai[0],shoupai:n}),a.shan.paishu=t.paishu+4;let o=null,u=0;for(;t.paishu;){let n;o?(n=t.gangzimo(),t._weikaigang&&t.kaigang(),o=null):n=t.zimo();let l={l:u,p:n};if(u==i){if(a.zimo(l),a.select_hule())return t.close(),{shoupai:a.shoupai,zhuangfeng:e,menfeng:i,baopai:t.baopai,fubaopai:a.shoupai.lizhi&&t.fubaopai};let n=a.select_gang();if(n){a.gang({l:i,m:n}),o=n;continue}a.dapai({l:i,p:a.select_dapai()})}else{if(a.zimo(l),a.dapai(l),a._neng_rong=!0,a.select_hule(l)){t.close();let l=n+["","+","=","-"][(4+u-i)%4];return{shoupai:a.shoupai,rongpai:l,zhuangfeng:e,menfeng:i,baopai:t.baopai,fubaopai:a.shoupai.lizhi&&t.fubaopai}}let s=a.select_fulou(l);if(s){if(a.fulou({l:i,m:s}),s.match(/^[mpsz]\d{4}/)){o=s;continue}a.dapai({l:i,p:a.select_dapai()})}}u=(u+1)%4}}}function c(i){let n=Majiang.Util.hule(i.shoupai,i.rongpai,Majiang.Util.hule_param({rule:s._rule,zhuangfeng:i.zhuangfeng,menfeng:i.menfeng,baopai:i.baopai,fubaopai:i.fubaopai,lizhi:i.shoupai.lizhi}));$(".zhuangfeng").text(u[i.zhuangfeng]),$(".menfeng").text(u[i.menfeng]),i.shoupai.lizhi?e($(".lizhi")):a($(".lizhi"));let t={baopai:i.baopai,fubaopai:i.fubaopai,paishu:0};i.fubaopai?e($(".shan.fubaopai")):a($(".shan.fubaopai")),o.baopai=new Majiang.UI.Shan($(".shan"),o.pai,t).redraw(!0);let l,h=i.shoupai.clone();i.rongpai&&h.zimo(i.rongpai),o.shoupai=new Majiang.UI.Shoupai($(".shoupai"),o.pai,h).redraw(!0),i.rongpai?$(".shoupai .zimo").prepend("<span>ロン</span>"):$(".shoupai .zimo").append("<span>ツモ</span>"),l=n&&n.defen?(i.rongpai?"ロン: ":"ツモ: ")+(i.rongpai?n.defen:i.menfeng?100*Math.ceil(n.defen/200)/2+" / "+100*Math.floor(n.defen/200):n.defen/3+"オール")+(n.damanguan?n.damanguan>1?` (役満 ×${n.damanguan})`:" (役満)":` (${n.fu}符 ${n.fanshu}翻)`):"(役なし)",$(".defen").text(l);let c="";n&&n.hupai&&(c=n.hupai.map((a=>a.name.match(/^(赤|裏)?ドラ$/)?`${a.name} ×${a.fanshu}`:a.name)).join(" / ")),$(".hupai").text(c),f.total++,a($(".answer")),e($(".button")),$(".answer button.miss").off("click").on("click",(()=>{r.push(i),m()})),e($(".exam")),a($(".break")),e($(".drill")),p=null,setTimeout((()=>{p=r.splice(5*Math.random(),1)[0]||g(s)}),10)}function m(){a($(".drill")),$(".stat").text(`回答数: ${f.total}、正答率: ${f.right/f.total*100|0}%`),f.total%10==0?(a($(".exam")),e($(".break")),e($(".drill"))):c(p||g(s))}function d(){a($(".drill")),$(".stat").text(""),p=null,r=[],s=function(){let a=new h,e=$('select[name="rule"]').val();return e=e?"-"==e?JSON.parse(localStorage.getItem("Majiang.rule")||"{}"):l[e]:{},e=Majiang.rule(e),a.kaiju({id:0,qijia:0,title:"",player:[],rule:e}),a}(),f={total:0,right:0},location.hash?c(function(a){let e,[i,n,t,l,o,u,s]=a.split("/"),p=Majiang.Shoupai.fromString(i);return"1"!=l&&p._zimo&&(e=p._zimo+"=",p.dapai(p._zimo)),"1"==s&&(p._lizhi=!0),n=n?n.split(","):[],t=t?t.split(","):p.lizhi?[]:null,o=+(o||0),u=+(u||0),{shoupai:p,rongpai:e,zhuangfeng:o,menfeng:u,baopai:n,fubaopai:t}}(location.hash.replace(/^#/,""))):c(g(s))}$((function(){o.pai=Majiang.UI.pai("#loaddata");for(let a of Object.keys(l))$('select[name="rule"]').append($("<option>").val(a).text(a));localStorage.getItem("Majiang.rule")&&$('select[name="rule"]').append($("<option>").val("-").text("カスタムルール").attr("selected",!0)),$('select[name="rule"]').on("change",d),$(".button button").on("click",(()=>{e($(".answer")),a($(".button"))})),$(".answer button.right").on("click",(()=>{f.right++,m()})),$(".break button").on("click",(()=>{c(p||g(s))})),d()}))})()})();